<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clicker Game v1.1.0</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #222;
    color: #fff;
    display: flex;
    flex-direction: row;
    height: 100vh;
  }

  /* Layout */
  .column {
    flex: 1;
    padding: 10px;
    box-sizing: border-box;
  }

  /* Responsive stacking for mobile */
  @media (max-width: 800px) {
    body {
      flex-direction: column;
      height: auto;
    }
    .column {
      width: 100%;
    }
  }

  /* Center column items */
  #circle-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
    gap: 10px;
  }

  #circle {
    width: 150px;
    height: 150px;
    background: radial-gradient(circle at center, #ff3, #f90);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.15s;
    cursor: pointer;
  }

  #circle:active {
    transform: scale(1.1);
  }

  #clicks, #cps {
    font-size: 1.2em;
  }

  /* Buttons for info */
  #middle-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }

  button {
    background: #444;
    border: none;
    color: white;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
  }

  button:hover {
    background: #555;
  }

  #info-display {
    background: #333;
    padding: 10px;
    border-radius: 10px;
    height: calc(100% - 60px);
    overflow-y: auto;
  }

  /* Right column sections */
  #upgrades, #store {
    background: #333;
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 10px;
  }

  .upgrade, .store-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #444;
    border-radius: 8px;
    padding: 6px;
    margin-bottom: 8px;
    cursor: pointer;
  }

  .upgrade img, .store-item img {
    width: 40px;
    height: 40px;
    margin-right: 10px;
  }

  .upgrade-info {
    flex: 1;
  }

  /* Popup */
  #popup-bg {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    align-items: center;
    justify-content: center;
    z-index: 999;
  }

  #popup {
    background: #333;
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    max-width: 300px;
  }

  #popup button {
    margin-top: 10px;
  }
</style>
</head>
<body>

<!-- Left column -->
<div class="column" id="left">
  <div id="circle-area">
    <div id="clicks">Clicks: 0</div>
    <div id="cps">CPS: 0</div>
    <div id="circle"></div>
  </div>
</div>

<!-- Middle column -->
<div class="column" id="middle">
  <div id="middle-buttons">
    <button onclick="showInfo('updates')">Updates</button>
    <button onclick="showInfo('settings')">Settings</button>
  </div>
  <div id="info-display">
    <h2>Welcome!</h2>
    <p>Select a tab above.</p>
  </div>
</div>

<!-- Right column -->
<div class="column" id="right">
  <div id="upgrades">
    <h3>Upgrades</h3>
    <div id="upgrade-list"></div>
  </div>

  <div id="store">
    <h3>Store</h3>
    <div class="store-item" onclick="buyCursor()">
      <img src="https://cookieclicker.wiki.gg/images/d/d2/Plain_cursor.png" alt="Cursor">
      <div class="upgrade-info">
        <strong>Cursor</strong><br>Cost: <span id="cursor-cost">15</span>
      </div>
      <div id="cursor-count">x0</div>
    </div>
  </div>
</div>

<!-- Popup -->
<div id="popup-bg">
  <div id="popup">
    <h2 id="popup-title"></h2>
    <p id="popup-desc"></p>
    <p id="popup-effect"></p>
    <p>Cost: <span id="popup-cost"></span> clicks</p>
    <button id="buy-upgrade">Buy</button>
    <button onclick="closePopup()">Cancel</button>
  </div>
</div>

<script>
  let clicks = 0;
  let cursors = 0;
  let cursorCost = 15;
  let baseCursorCPS = 0.1;
  let multiplier = 1;
  let cps = 0;
  let clickPower = 1;
  let upgrades = [
    {
      name: "Reinforced Index Finger",
      desc: "Doubles cursor output.",
      cost: 100,
      req: 1,
      effect: () => multiplier *= 2,
      unlocked: false,
      bought: false,
      icon: "https://cookieclicker.wiki.gg/images/d/d2/Plain_cursor.png"
    },
    {
      name: "Carpal Tunnel Prevention Cream",
      desc: "Doubles cursor effectiveness again.",
      cost: 500,
      req: 1,
      effect: () => multiplier *= 2,
      unlocked: false,
      bought: false,
      icon: "https://cookieclicker.wiki.gg/images/0/0b/Beryl_cursor.png"
    },
    {
      name: "Ambidextrous",
      desc: "Doubles cursor effectiveness yet again.",
      cost: 10000,
      req: 10,
      effect: () => multiplier *= 2,
      unlocked: false,
      bought: false,
      icon: "https://cookieclicker.wiki.gg/images/7/7b/Aqua_cursor.png"
    }
  ];

  const circle = document.getElementById('circle');
  const clicksDisplay = document.getElementById('clicks');
  const cpsDisplay = document.getElementById('cps');
  const upgradeList = document.getElementById('upgrade-list');

  circle.addEventListener('click', () => {
    clicks += clickPower;
    circle.style.transform = 'scale(1.1)';
    setTimeout(() => { circle.style.transform = 'scale(1.0)'; }, 100);
    updateDisplay();
  });

  function buyCursor() {
    if (clicks >= cursorCost) {
      clicks -= cursorCost;
      cursors++;
      cursorCost = Math.round(cursorCost * 1.15);
      document.getElementById('cursor-cost').innerText = cursorCost;
      document.getElementById('cursor-count').innerText = 'x' + cursors;
      updateDisplay();
    }
  }

  function updateDisplay() {
    clicksDisplay.innerText = `Clicks: ${Math.floor(clicks)}`;
    cps = cursors * baseCursorCPS * multiplier;
    cpsDisplay.innerText = `CPS: ${cps.toFixed(1)}`;
    checkUpgrades();
  }

  // Increment clicks gradually based on CPS
  setInterval(() => {
    clicks += cps / 10;
    updateDisplay();
  }, 100);

  function checkUpgrades() {
    upgradeList.innerHTML = '';
    upgrades.forEach((u, i) => {
      if (!u.unlocked && cursors >= u.req) u.unlocked = true;
      if (u.unlocked && !u.bought) {
        const el = document.createElement('div');
        el.classList.add('upgrade');
        el.innerHTML = `
          <img src="${u.icon}" alt="${u.name}">
          <div class="upgrade-info"><strong>${u.name}</strong><br>${u.cost} clicks</div>
        `;
        el.onclick = () => openPopup(i);
        upgradeList.appendChild(el);
      }
    });
  }

  function openPopup(index) {
    const u = upgrades[index];
    document.getElementById('popup-title').innerText = u.name;
    document.getElementById('popup-desc').innerText = u.desc;
    document.getElementById('popup-effect').innerText = 'Effect: Doubles cursor effectiveness';
    document.getElementById('popup-cost').innerText = u.cost;
    document.getElementById('buy-upgrade').onclick = () => buyUpgrade(index);
    document.getElementById('popup-bg').style.display = 'flex';
  }

  function closePopup() {
    document.getElementById('popup-bg').style.display = 'none';
  }

  function buyUpgrade(index) {
    const u = upgrades[index];
    if (clicks >= u.cost && !u.bought) {
      clicks -= u.cost;
      u.bought = true;
      u.effect();
      closePopup();
      updateDisplay();
    }
  }

  function showInfo(tab) {
    const info = document.getElementById('info-display');
    if (tab === 'updates') {
      info.innerHTML = `
        <h2>Patch Notes v1.1.0</h2>
        <ul>
          <li>Added 3-column layout (mobile-friendly)</li>
          <li>Added pop-up upgrade details</li>
          <li>Improved visuals and fixed circle scaling bug</li>
          <li>Added gradual CPS-based income for smoother feel</li>
        </ul>`;
    } else {
      info.innerHTML = `
        <h2>Settings</h2>
        <p>No settings yet!</p>`;
    }
  }

  updateDisplay();
</script>
</body>
</html>
